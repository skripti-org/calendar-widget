import React, { useState, useEffect } from 'react'
import './App.css'
import EventMapper from './components/EventMapper'

function App() {
  const events = [
    {
      kind: 'calendar#events',
      etag: '"p330apl7ku6fv40g"',
      summary: 'Skripti ry',
      description:
        'Skripti ry:n tapahtumakalenteri. Lue lis√§√§ osoitteessa www.skripti.org',
      updated: '2021-08-07T21:48:58.856Z',
      timeZone: 'Europe/Helsinki',
      accessRole: 'reader',
      defaultReminders: [],
      nextSyncToken: 'CMCs1PTxn_ICEAAYASDBqeO4AQ==',
      items: [
        {
          kind: 'calendar#event',
          etag: '"3108913711260000"',
          id: '45kb4rkovpvisuqirsr9pqi7bn',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=NDVrYjRya292cHZpc3VxaXJzcjlwcWk3Ym4gc2tyaXB0aXJ5QG0',
          created: '2019-04-05T09:34:15.000Z',
          updated: '2019-04-05T09:34:15.630Z',
          summary: 'Torisitsit',
          description:
            '\nTorisitsit? Wappuna? Joensuussa?\n\nTODELLAKIN!\n\nKotex ry tuo muun muassa Kuopiossa ja Helsingiss√§ tutut opiskelijoiden vappuperinteisiin kuuluvat Torisitsit Joensuun uudistetulle Kauppatorille. Jokaisen opiskelijan kuuluu kokea edes kerran el√§m√§ss√§√§n n√§m√§ poikkitieteelliset suursitsit! \n\nSitsien tarkka hinta varmentuu my√∂hemmin ja lipunmyynti tulee tapahtumaan Kide.appin kautta. Tapahtumaan ovat tervetulleita kaikki korkeakouluopiskelijat, my√∂s muista kaupungeista.\n\nSitsialue on anniskelualuetta, joten omat juomat j√§tet√§√§n t√§ll√§ kertaa odottelemaan sitsien p√§√§ttymist√§ kotiin tai kaupan hyllylle. Juomapuolesta huolehtii Ravintola Kerubi. \n\nMIT√Ñ: Wapun Torisitsit 2019 \nMISS√Ñ: Kauppatori, Joensuu\nMILLOIN: tiistaina 30.4.2019 klo 12-14.30\nKENELLE: Kaikille korkeakouluopiskelijoille\nPUKUKOODI: Haalarit + vappu!\nMIT√Ñ MAKSAA: Tarkentuu my√∂hemmin.\nMIKSI: Torisitsit Wapun tekee üéâüéàü•Ç',
          location: 'Kauppatori',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-04-30T12:00:00+03:00',
          },
          end: {
            dateTime: '2019-04-30T14:30:00+03:00',
          },
          iCalUID: '45kb4rkovpvisuqirsr9pqi7bn@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3108914449374000"',
          id: '4rdnvjm6376ubdf0ee10i0bsm3',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=NHJkbnZqbTYzNzZ1YmRmMGVlMTBpMGJzbTMgc2tyaXB0aXJ5QG0',
          created: '2019-04-05T09:38:25.000Z',
          updated: '2019-04-05T09:40:24.687Z',
          summary: 'postwabukalyptiset sitsit',
          description:
            'Mit√§ j√§√§ j√§ljelle, kun vappu on ohi? Valvottavatko liskot √∂it√§si? Vapun j√§lkeiseen olotilaan on hyv√§ alkaa valmistautumaan hyviss√§ ajoin. Oidipus ryn vappu ei lopu, vaan se jatkuu poikkitieteellisill√§ sitseill√§. Maailmanloppu koittaa postwabukalyptisill√§ sitseill√§ vappup√§iv√§n j√§lkeen 2.5.! Laita p√§iv√§m√§√§r√§ jo kalenteriin!\n\nMiten sin√§ varaudut maailman loppuun? Mit√§ maailmanlopun j√§lkeen j√§√§ j√§ljelle? Tule paikalle n√§ytt√§m√§√§n ja ottamaan selv√§√§, mit√§ maailmanloppu vapun j√§lkeen on! \n\nMIT√Ñ: Postwabukalyptiset sitsit\nMISS√Ñ: E200\nMILLOIN: 2.5.2019 klo 18-\u003e\nPUKUKOODI: haalarit + maailmanlopun tamineet\nHINTA: 8e\nILMO: 25.3.-8.4.2019\nOtathan omat menovetesi mukaan, sill√§ alkoholia ei tarjota sitseill√§. Ohjelmanumeroihin saattaa sis√§lty√§ alkoholia, mutta oma pullo mukaan!\n\nPostwabukalyptiset bailut jatkuu Las Palmasissa maailmanlopun elkein sitsien j√§lkeen!\n\nHUOM! Ilmottautuminen aukeaa 25.3.2019 klo 12.00! Tapahtumassa julkaistaan linkki, josta ilmottaudutaan.',
          location: 'E200',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-05-02T18:00:00+03:00',
          },
          end: {
            dateTime: '2019-05-03T00:00:00+03:00',
          },
          iCalUID: '4rdnvjm6376ubdf0ee10i0bsm3@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3109284232152000"',
          id: '7s4e5im4coh1efrs20sdk9f2fu',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=N3M0ZTVpbTRjb2gxZWZyczIwc2RrOWYyZnUgc2tyaXB0aXJ5QG0',
          created: '2019-04-07T12:34:09.000Z',
          updated: '2019-04-07T13:01:56.076Z',
          summary: 'Joensuun vappusoudut 2019',
          description:
            'Nyt on j√§lleen aika katsoa, mist√§ joukkueesta l√∂ytyy Joensuun vahvimmat hauikset ja paras yhteinen rytmi, sill√§ Joensuun mets√§ylioppilaat j√§rjest√§√§ j√§lleen Vappusoudut! Kilpailussa eri ainej√§rjest√∂t tai muut organisaatiot p√§√§sev√§t mittelem√§√§n toisiaan vastaan kirkkovenesoudussa. Kilpa k√§yd√§√§n 14-henkisill√§ joukkueilla ja j√§rjest√§j√§n tarjoamilla veneill√§. Kilpailu tapahtuu perinteisesti Jokiasemalla, ja paikalla on oheisaktiviteettia my√∂s odottelun ajaksi! Lis√§√§ informaatiota luvassa ihan kohta, joten ei kuin vaan joukkueita kokoamaan!\n\nNopeimman kierroksen lis√§ksi palkitaan tottakai perinteiseen tapaan paras meininki!\n\nNetti-ilmoittautuminen avataan 5.4., joten ei kun joukkue kasaan!\n\nKysymykset ym. yhteydenotot s√§hk√∂postitse vappusoudut@jmyo.fi\nMIT√Ñ: Vappusoudut\nMISS√Ñ: Jokiasemalla\nMILLOIN: 27.4.2019\nMIT√Ñ MAKSAA: 80‚Ç¨/venekunta, eli alle 6/hl√∂!',
          location: 'Jokiasema, Hasanniementie 3, 80110 Joensuu, Suomi',
          creator: {
            email: 'arkko.eetu@gmail.com',
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-04-27T12:00:00+03:00',
          },
          end: {
            dateTime: '2019-04-27T16:00:00+03:00',
          },
          iCalUID: '7s4e5im4coh1efrs20sdk9f2fu@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3109657695322000"',
          id: '1ddlmlh0n3lhjngoik3mjb0c44',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=MWRkbG1saDBuM2xoam5nb2lrM21qYjBjNDQgc2tyaXB0aXJ5QG0',
          created: '2019-04-09T16:54:07.000Z',
          updated: '2019-04-09T16:54:07.661Z',
          summary: 'Vappuleijonan mets√§stys',
          description:
            'Oletko valmis nappaamaan jo aivan liian pitk√§√§n uinuneen mystisen Vappuleijonan? Jos vastasit KYLL√Ñ, kasaa itsellesi joukkue ja tule mukaan vapun seikkailunt√§yteisimp√§√§n tapahtumaan. T√§t√§ spektaakkelia et todellakaan halua missata!\n\nSpektaakkelin tarjoaa Poikkeus Ry, joka toivottaa kaikki korkeakouluopiskelijat tervetulleiksi mukaan mets√§stykseen jo viidennen kerran vappuaattona 30.4.2019! \n\nTuon viekkaan el√§imen met√§stys karjaistaan k√§yntiin kello 16 Sirkkalan puistossa, Kimmelin takana. Mets√§styksen tiimellyksess√§ erotellaan jyv√§t akanoista ja otetaan selv√§√§ kenen rahkeet riitt√§v√§t Vappuleijonan kesytt√§miseen!\n\nLeijonanmets√§styksess√§ kaikki keinot ovat sallittuja ja se n√§kyy sek√§ kuuluu kauas, kun toinen toistaan erikoisempia leijonamets√§stysjoukkueita kilpailee toisiaan vastaan Joensuun savanneilla. Suurimman pistem√§√§r√§n saavuttava joukkue p√§√§see nauttimaan mainetta ja kunniaa sek√§ ennen kaikkea itse kuninkaasta, Suuresta Leijonasta.\n-------------------------------------------------------------------------------\nKILPAILUN KULKU:\n\nJoukkueet suorittavat heitt√§ytymiskyky√§ sek√§ j√§rjen viisasta √§√§nt√§ vaativia teht√§vi√§, joista vaikeusasteen mukaan tulee eri m√§√§r√§ pisteit√§. Mit√§ enemm√§n ja kekseli√§√§mmin joukkue teht√§vi√§ suorittaa, sit√§ l√§hemm√§ksi se p√§√§see suurempia pisteit√§ sek√§ suurta Leijonaa. Suurimmat pisteet saanut joukkue nimet√§√§n vuoden Leijonanmets√§st√§j√§ksi, vappuaaton sankariksi! \n\nOn my√∂s t√§rke√§√§ mainita, ett√§ omaper√§isin ja persoonallisimmalta n√§ytt√§v√§ leijonanmets√§stysjoukkue p√§√§see takuuvarmasti silitt√§m√§√§n hyvinkin l√§hiet√§isyydelt√§ itse Leijonaa. \n\nRauhoitettu kun Leijonakin on, my√∂s mets√§stysaikaa on rajoitettu. Leijonanmets√§stykseen on varattu aikaa klo 16‚Äì20:30 v√§lill√§, jolloin Leijonan on todettu onneksemme olevan aktiivisimmillaan. \n-------------------------------------------------------------------------------\nILMOITTAUTUMINEN:  \n\nIlmoittautuminen aukeaa 3.4.2019 kello 12. Joukkueen vastuuhenkil√∂ ilmoittaa joukkueensa kaikki j√§senet kerralla mukaan jahtiin. Tarkemmat ohjeet p√§ivitet√§√§n my√∂hemmin.\n-------------------------------------------------------------------------------\nTIIVISTELM√Ñ:\n\nAika: 30.4.2019 klo 16‚Äì20.30\nPaikka: Joensuun keskustan alue, l√§ht√∂ Sirkkalan puistosta (Kimmelin takaa)\nMaksu: 5 ‚Ç¨ / henkil√∂ (+palvelumaksu) (hinta sis√§lt√§√§ poikkeuksellisen upean vappuhaalarimerkin ja raadollisen m√§√§r√§n nestem√§ist√§ dopingia mets√§st√§jille) \nJoukkueen koko: 4-7 hl√∂√§\nIlmoittautuminen: tiedot tulossa!',
          location: 'Keskusta',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-04-30T15:30:00+03:00',
          },
          end: {
            dateTime: '2019-04-30T20:00:00+03:00',
          },
          iCalUID: '1ddlmlh0n3lhjngoik3mjb0c44@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3110360191564000"',
          id: '6pbl4lvu3mtm1anf7a0tpdt8sd',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=NnBibDRsdnUzbXRtMWFuZjdhMHRwZHQ4c2Qgc2tyaXB0aXJ5QG0',
          created: '2019-04-13T17:13:36.000Z',
          updated: '2019-04-13T18:28:15.782Z',
          summary: 'Kyykk√§treenit',
          description:
            '\nhttps://www.facebook.com/events/1176136312546070/TEK sponsoroi kyyk√§n Skriptin j√§senille, joten l√§hdet√§√§n treenaamaan kyykk√§√§ yhdess√§! Kokemusta ei tarvitse olla ja yhdess√§ opetellaan. Mukaan vain hyv√§√§ asennetta ja pelihenke√§.',
          location: 'Kentt√§ tiedepuiston vieress√§',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-04-26T16:00:00+03:00',
          },
          end: {
            dateTime: '2019-04-26T19:00:00+03:00',
          },
          iCalUID: '6pbl4lvu3mtm1anf7a0tpdt8sd@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3112043280604000"',
          id: '6gdnmcbr8nc7mvvp3roqnsjcfm',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=Nmdkbm1jYnI4bmM3bXZ2cDNyb3Fuc2pjZm0gc2tyaXB0aXJ5QG0',
          created: '2019-04-05T09:43:38.000Z',
          updated: '2019-04-23T12:14:00.302Z',
          summary: 'Vappupicnic',
          description:
            '\nSkripti ry ja Oidipus ry ly√∂tt√§ytyv√§t yhteen juhlistamaan vappua Ilosaaressa! Luvassa yleist√§ hengailua ja kyykk√§√§ ja mit√§ muuta kivaa nyt keksit√§√§nk√§√§n. Paikalla on grilli, joten halutessasi voit grillailla. Meid√§t tunnistaa turkooseista ja hopeanharmaista haalareista. Mukaan omat ruoat ja juomat. Tapahtuma on Ilosaaren yleisen vappupicnicin yhteydess√§.\n\nMIT√Ñ: Skriptin & Oidipuksen vappupicnic\nMISS√Ñ: Ilosaari, yleisen vappupicnicin yhteydess√§\nMILLOIN: 1.5.2019 klo 12 eteenp√§in\nKENELLE: Skripti ry:n ja Oidipus ry:n j√§senet\n\nhttps://www.facebook.com/events/288525532076969/',
          location: 'Ilosaari, 80100 Joensuu, Suomi',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-05-01T12:00:00+03:00',
          },
          end: {
            dateTime: '2019-05-01T18:00:00+03:00',
          },
          iCalUID: '6gdnmcbr8nc7mvvp3roqnsjcfm@google.com',
          sequence: 1,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3112043629736000"',
          id: '01bp0jpfj3g5ia4seh4ge61ds4',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=MDFicDBqcGZqM2c1aWE0c2VoNGdlNjFkczQgc2tyaXB0aXJ5QG0',
          created: '2019-04-05T09:42:57.000Z',
          updated: '2019-04-23T12:16:54.868Z',
          summary: 'Wappusauna',
          description:
            '\nTervetuloa heng√§ht√§m√§√§n hetkeksi vapun rientojen keskell√§ ja viett√§m√§√§n yhteist√§ v√§likuolemaa Skriptin ja Tombolon kesken Suvaksen saunatilalle sunnuntaina 28.4. klo 18 alkaen. Luvassa kodikasta ja rentoa illanviettoa. Tarjolla itsetehtyj√§ tuoreita munkkeja (ruokavammaiset huomioitu) sek√§ simaa (ja mahdollista ter√§styst√§).\n\nPaikassa on saunomismahdollisuus (omat pyyhkeet mukaan) ja mik√§li suuta kovasti kuivaa, niin ota omia juomia mukaan.\n\nMIT√Ñ: Skriptin ja Tombolon vappusauna\nMISS√Ñ: Suvaksen saunatila, Suvantokatu 6\nMILLOIN: 28.4.  klo 18 eteenp√§in\nKENELLE: Skriptin ja Tombolon j√§senet\n\n\nhttps://www.facebook.com/events/380848006102662/',
          location: 'Suvantokatu 6, 80100 Joensuu, Suomi',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-04-28T18:00:00+03:00',
          },
          end: {
            dateTime: '2019-04-28T23:00:00+03:00',
          },
          iCalUID: '01bp0jpfj3g5ia4seh4ge61ds4@google.com',
          sequence: 0,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
        {
          kind: 'calendar#event',
          etag: '"3129173045662000"',
          id: '2dc0kfqfqdfsasga4kafq17koq',
          status: 'confirmed',
          htmlLink:
            'https://www.google.com/calendar/event?eid=MmRjMGtmcWZxZGZzYXNnYTRrYWZxMTdrb3Egc2tyaXB0aXJ5QG0',
          created: '2019-04-05T14:09:20.000Z',
          updated: '2019-07-31T15:22:02.831Z',
          summary: 'Fuksisauna',
          creator: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          organizer: {
            email: 'skriptiry@gmail.com',
            self: true,
          },
          start: {
            dateTime: '2019-09-13T18:00:00+03:00',
          },
          end: {
            dateTime: '2019-09-13T19:00:00+03:00',
          },
          iCalUID: '2dc0kfqfqdfsasga4kafq17koq@google.com',
          sequence: 1,
          extendedProperties: {
            private: {
              everyoneDeclinedDismissed: '-1',
            },
          },
          eventType: 'default',
        },
      ],
    },
  ]
  const [data, setData] = useState([])

  useEffect(() => {
    getData()
  }, [])

  const getData = () => {
    fetch('https://skripti.org/calendarApi', {
      headers: {
        accept: 'application/json',
      },
    })
      .then(function (response) {
        console.log(response.statusCode)
        if (response.ok) {
          return response.json()
        }
      })
      .then(function (myJson) {
        setData(myJson)
      })
  }

  return (
    <div className="App">
      {data && data.length > 0 && <EventMapper events={data} />}

      {data.length === 0 && <EventMapper events={events} />}

      <div className="App-info">
        <a
          className="App-link"
          href="https://github.com/skriptiry/calendar-widget"
        >
          tapahtumakalenteri v. 0.1
        </a>
      </div>
    </div>
  )
}

export default App
